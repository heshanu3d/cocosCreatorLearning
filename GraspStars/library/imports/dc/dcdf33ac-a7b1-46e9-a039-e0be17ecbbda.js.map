{"version":3,"sources":["../../../../assets/Scripts/assets/Scripts/Star.js"],"names":["cc","Class","extends","Component","properties","pickRadius","getPlayerDinstance","playerPos","game","player","getPosition","dist","node","sub","mag","onPicked","spawnStars","gainScore","destroy","start","update","dt","opacityRation","timer","starDuration","minOpacity","opacity","Math","floor"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,oBAAa;AADL,KAHP;;AAOL;;AAEAC,sBATK,gCASiB;AAClB,YAAIC,YAAY,KAAKC,IAAL,CAAUC,MAAV,CAAiBC,WAAjB,EAAhB;AACA,YAAIC,OAAO,KAAKC,IAAL,CAAUF,WAAV,GAAwBG,GAAxB,CAA4BN,SAA5B,EAAuCO,GAAvC,EAAX;AACA,eAAOH,IAAP;AACH,KAbI;AAeLI,YAfK,sBAeO;AACR,aAAKP,IAAL,CAAUQ,UAAV;AACA,aAAKR,IAAL,CAAUS,SAAV;AACA,aAAKL,IAAL,CAAUM,OAAV;AAEH,KApBI;;;AAsBL;;AAEAC,SAxBK,mBAwBI,CAER,CA1BI;AA4BLC,UA5BK,kBA4BGC,EA5BH,EA4BO;AACR,YAAG,KAAKf,kBAAL,KAA4B,KAAKD,UAApC,EACI,KAAKU,QAAL;AACJ,YAAIO,gBAAgB,IAAI,KAAKd,IAAL,CAAUe,KAAV,GAAkB,KAAKf,IAAL,CAAUgB,YAApD;AACA,YAAIC,aAAa,EAAjB;AACA,aAAKb,IAAL,CAAUc,OAAV,GAAoBD,aAAaE,KAAKC,KAAL,CAAWN,iBAAiB,MAAMG,UAAvB,CAAX,CAAjC;AACA;AACH;AAnCI,CAAT","file":"Star.js","sourceRoot":"../../../../assets/Scripts","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        pickRadius : 0,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    getPlayerDinstance () {\n        var playerPos = this.game.player.getPosition();\n        var dist = this.node.getPosition().sub(playerPos).mag();\n        return dist;\n    },\n    \n    onPicked () {\n        this.game.spawnStars();\n        this.game.gainScore();\n        this.node.destroy();\n        \n    },\n\n    // onLoad () {},\n\n    start () {\n\n    },\n\n    update (dt) {\n        if(this.getPlayerDinstance() < this.pickRadius)\n            this.onPicked();\n        var opacityRation = 1 - this.game.timer / this.game.starDuration;\n        var minOpacity = 50;\n        this.node.opacity = minOpacity + Math.floor(opacityRation * (255 - minOpacity));\n        return;\n    },\n});\n"]}